"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5],{55885:function(A,c,n){n.r(c);var p=n(97857),s=n.n(p),E=n(5574),f=n.n(E),h=n(67294),u=n(55742),d=n(34041),D=n(90063),v=n(71577),O=n(96974),_=n(85893),C=function(){var P=(0,h.useState)([]),m=f()(P,2),l=m[0],i=m[1],j=(0,O.s0)();(0,h.useEffect)(function(){fetch("/api/rollcall?lesson_id="+window.location.search.split("=")[1]).then(function(r){return r.json()}).then(function(r){var t=r.map(function(e){return s()(s()({},e),{},{status:"present"})});i(t)}).catch(function(r){return console.error("Error fetching data:",r)})},[]);var M=function(t,e){var o=l.map(function(a){return a.code===t.code?s()(s()({},a),{},{status:e,other:e==="absent"?"late":void 0}):a});i(o)},g=function(t,e){var o=l.map(function(a){return a.code===t.code?s()(s()({},a),{},{other:e}):a});i(o)},y=function(){var t={data:l.map(function(e){return{code:e.code,name:e.name,adminclass_name:e.adminclass_name,result:e.other||"present"}})};fetch("/api/result?lesson_id="+window.location.search.split("=")[1],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){j("/result?result_id=".concat(e.data.result_id))}).catch(function(e){return console.error("Error posting data:",e)})},b=[{title:"\u59D3\u540D",dataIndex:"name",key:"name"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",render:function(t,e){return(0,_.jsxs)(u.ZP.Group,{value:t,onChange:function(a){return M(e,a.target.value)},children:[(0,_.jsx)(u.ZP,{value:"present",children:"\u5DF2\u5230"}),(0,_.jsx)(u.ZP,{value:"absent",children:"\u672A\u5230"})]})}},{title:"\u5176\u4ED6",dataIndex:"other",key:"other",render:function(t,e){return(0,_.jsxs)(d.Z,{value:t,onChange:function(a){return g(e,a)},disabled:e.status!=="absent",children:[(0,_.jsx)(d.Z.Option,{value:"leave",children:"\u8BF7\u5047"}),(0,_.jsx)(d.Z.Option,{value:"late",children:"\u8FDF\u5230"})]})}}];return(0,_.jsxs)("div",{children:[(0,_.jsx)(D.Z,{dataSource:l,columns:b,rowKey:"code"}),(0,_.jsx)("div",{style:{textAlign:"center"},children:(0,_.jsx)(v.ZP,{type:"primary",onClick:y,children:"\u63D0\u4EA4"})})]})};c.default=C}}]);
