"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{89938:function(fe,R,s){s.r(R),s.d(R,{default:function(){return de}});var V=s(5574),b=s.n(V),G=s(15009),d=s.n(G),z=s(97857),Y=s.n(z),H=s(99289),h=s.n(H),y=s(2618),K=s(51042),W=s(1524),J=s(47490),Q=s(2236),X=s(37476),w=s(5966),B=s(90672),k=s(92276),t=s(35312),f=s(45360),Z=s(71577),q=s(85265),F=s(67294),C=s(38020),P=s(64317),_=s(86615),ee=s(22452),ae=s(5914),e=s(85893),se=function(u){var r=(0,t.useIntl)();return(0,e.jsxs)(C.L0,{stepsProps:{size:"small"},stepsFormRender:function(g,a){return(0,e.jsx)(ae.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),open:u.updateModalOpen,footer:a,onCancel:function(){u.onCancel()},children:g})},onFinish:u.onSubmit,children:[(0,e.jsxs)(C.L0.StepForm,{initialValues:{name:u.values.name,desc:u.values.desc},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(w.Z,{name:"name",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(B.Z,{name:"desc",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(C.L0.StepForm,{initialValues:{target:"0",template:"0"},title:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(P.Z,{name:"target",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(P.Z,{name:"template",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(_.Z.Group,{name:"type",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(C.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(ee.Z,{name:"time",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(P.Z,{name:"frequency",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},re=se,te=function(){var p=h()(d()().mark(function u(r){var i;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=f.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,(0,y.HP)(Y()({},r));case 4:return i(),f.ZP.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),i(),f.ZP.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},u,null,[[1,9]])}));return function(r){return p.apply(this,arguments)}}(),le=function(){var p=h()(d()().mark(function u(r){var i;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=f.ZP.loading("Configuring"),a.prev=1,a.next=4,(0,y.D7)({name:r.name,desc:r.desc,key:r.key});case 4:return i(),f.ZP.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),i(),f.ZP.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},u,null,[[1,9]])}));return function(r){return p.apply(this,arguments)}}(),ue=function(){var p=h()(d()().mark(function u(r){var i;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=f.ZP.loading("\u6B63\u5728\u5220\u9664"),r){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,y.DV)({key:r.map(function(x){return x.key})});case 6:return i(),f.ZP.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),i(),f.ZP.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},u,null,[[3,11]])}));return function(r){return p.apply(this,arguments)}}(),ne=function(){var u=(0,F.useState)(!1),r=b()(u,2),i=r[0],g=r[1],a=(0,F.useState)(!1),x=b()(a,2),ie=x[0],A=x[1],oe=(0,F.useState)(!1),D=b()(oe,2),E=D[0],L=D[1],M=(0,F.useRef)(),ce=(0,F.useState)(),I=b()(ce,2),c=I[0],S=I[1],me=(0,F.useState)([]),$=b()(me,2),T=$[0],O=$[1],N=(0,t.useIntl)(),U=[{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.rollcallTime",defaultMessage:"\u70B9\u540D\u65F6\u95F4"}),sorter:!0,dataIndex:"rollcallTime",valueType:"dateTime"},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u8BFE\u7A0B\u540D\u79F0"}),dataIndex:"className",tip:"\u8FD9\u662F\u70B9\u540D\u7684\u8BFE\u7A0B\u540D\u79F0",render:function(l,n){return(0,e.jsx)("a",{onClick:function(){S(n),L(!0)},children:l})}},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.classid",defaultMessage:"\u8BFE\u7A0B\u53F7"}),dataIndex:"classid",sorter:!0,hideInForm:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.classTeacher",defaultMessage:"\u4EFB\u8BFE\u8001\u5E08"}),dataIndex:"classTeacher",sorter:!0,hideInForm:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.studentTotal",defaultMessage:"\u70B9\u540D\u4EBA\u6570"}),dataIndex:"studentTotal",sorter:!0,hideInForm:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.resultUrl",defaultMessage:"\u7ED3\u679C\u94FE\u63A5"}),dataIndex:"resultUrl",hideInForm:!0}];return(0,e.jsxs)(W._z,{children:[(0,e.jsx)(J.Z,{headerTitle:N.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:M,rowKey:"key",search:!1,toolBarRender:function(){return[(0,e.jsxs)(Z.ZP,{type:"primary",onClick:function(){g(!0)},children:[(0,e.jsx)(K.Z,{})," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:y.jR,columns:U,rowSelection:{onChange:function(l,n){O(n)}}}),(T==null?void 0:T.length)>0&&(0,e.jsxs)(Q.S,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:T.length})," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",T.reduce(function(o,l){return o+l.callNo},0)," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,e.jsx)(Z.ZP,{onClick:h()(d()().mark(function o(){var l,n;return d()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ue(T);case 2:O([]),(l=M.current)===null||l===void 0||(n=l.reloadAndRest)===null||n===void 0||n.call(l);case 4:case"end":return j.stop()}},o)})),children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(Z.ZP,{type:"primary",children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(X.Y,{title:N.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",open:i,onOpenChange:g,onFinish:function(){var o=h()(d()().mark(function l(n){var v;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,te(n);case 2:v=m.sent,v&&(g(!1),M.current&&M.current.reload());case 4:case"end":return m.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(w.Z,{rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],width:"md",name:"name"}),(0,e.jsx)(B.Z,{width:"md",name:"desc"})]}),(0,e.jsx)(re,{onSubmit:function(){var o=h()(d()().mark(function l(n){var v;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,le(n);case 2:v=m.sent,v&&(A(!1),S(void 0),M.current&&M.current.reload());case 4:case"end":return m.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),onCancel:function(){A(!1),E||S(void 0)},updateModalOpen:ie,values:c||{}}),(0,e.jsx)(q.Z,{width:600,open:E,onClose:function(){S(void 0),L(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,e.jsx)(k.vY,{column:2,title:c==null?void 0:c.name,request:h()(d()().mark(function o(){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{data:c||{}});case 1:case"end":return n.stop()}},o)})),params:{id:c==null?void 0:c.name},columns:U})})]})},de=ne}}]);
